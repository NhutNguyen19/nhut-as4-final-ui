<div class="container mx-auto">
  <h2 class="text-2xl font-semibold text-gray-700 mb-6">Danh sách sản phẩm</h2>

  <!-- Form thêm/sửa sản phẩm -->
  <div class="bg-white p-6 shadow-md rounded-lg mb-6">
    <h3 class="text-xl font-semibold text-gray-700">
      {{ isEditing ? "Sửa sản phẩm" : "Thêm sản phẩm" }}
    </h3>

    <!-- Tên sản phẩm -->
    <label class="block mt-4 text-gray-700">Tên sản phẩm</label>
    <input
      [(ngModel)]="currentProduct.name"
      class="border p-2 rounded-md w-full mb-3"
      placeholder="Nhập tên sản phẩm"
    />

    <!-- Mô tả -->
    <label class="block text-gray-700">Mô tả</label>
    <input
      [(ngModel)]="currentProduct.description"
      class="border p-2 rounded-md w-full mb-3"
      placeholder="Nhập mô tả sản phẩm"
    />

    <!-- Giá -->
    <label class="block text-gray-700">Giá</label>
    <input
      [(ngModel)]="currentProduct.price"
      type="number"
      class="border p-2 rounded-md w-full mb-3"
      placeholder="Nhập giá sản phẩm"
    />

    <!-- Số lượng -->
    <label class="block text-gray-700">Số lượng</label>
    <input
      [(ngModel)]="currentProduct.stockQuantity"
      type="number"
      class="border p-2 rounded-md w-full mb-3"
      placeholder="Nhập số lượng sản phẩm"
    />

    <!-- Danh mục -->
    <label class="block text-gray-700">Danh mục</label>
    <select
      [(ngModel)]="currentProduct.categoryId"
      class="border p-2 rounded-md w-full mb-3"
      [ngClass]="{ 'border-red-600': !currentProduct.categoryId }"
    >
      <option value="" disabled selected>Chọn danh mục</option>
      <option *ngFor="let category of categories" [value]="category.id">
        {{ category.name }}
      </option>
    </select>

    <button
      (click)="saveProduct()"
      class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-800"
    >
      {{ isEditing ? "Cập nhật" : "Thêm" }}
    </button>
    <button
      *ngIf="isEditing"
      (click)="resetForm()"
      class="ml-2 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-800"
    >
      Hủy
    </button>
  </div>

  <!-- Bảng danh sách sản phẩm -->
  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-100 rounded-lg">
      <thead>
        <tr class="bg-gray-300 text-gray-700">
          <th class="p-3 text-center">Tên sản phẩm</th>
          <th class="p-3 text-center">Mô tả</th>
          <th class="p-3 text-center">Giá</th>
          <th class="p-3 text-center">Số lượng</th>
          <th class="p-3 text-center">Danh mục</th>
          <th class="p-3 text-center">Tùy chọn</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let product of products; ngForTrackBy: trackById"
          class="even:bg-gray-100 hover:bg-gray-200"
        >
          <td class="p-3 text-center">{{ product.name }}</td>
          <td class="p-3 text-center">{{ product.description }}</td>
          <td class="p-3 text-center">{{ product.price | currency }}</td>
          <td class="p-3 text-center">{{ product.stockQuantity }}</td>
          <td class="p-3 text-center">
            {{ getCategoryName(product.categoryId || "") }}
          </td>
          <td class="p-3 text-center">
            <button
              (click)="editProduct(product)"
              class="px-3 py-1 bg-yellow-600 text-white rounded-md hover:bg-yellow-800"
            >
              Sửa
            </button>
            <button
              (click)="showCategoryName(product.categoryId || '')"
              class="ml-2 px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-800"
            >
              Xem Danh Mục
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
